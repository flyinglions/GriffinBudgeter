<!DOCTYPE html>
<html class="ui-mobile"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><!-- base href="http://jquerymobile.com/test/docs/pages/multipage-template.html" -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1"> </meta>
	<title>Griffin Budgeter</title> 
        <!--Some default stuff  - not neccessary?-->
	<!--<link rel="stylesheet" href="multipage-template_files/jquery.css">
	<script src="multipage-template_files/jquery-1.js"></script>
	<script src="multipage-template_files/jquery.js"></script>-->
        
        
        <!--##################Start of very long script includes ??? -->
        <link rel="stylesheet" href="./theme/Wikus/jquery.mobile-1.1.1.css" />	

        <!--<link rel="stylesheet" href="./theme/Wikus/jquery.mobile.structure-1.1.0.min.css" />-->
        <script src="./theme/Wikus/jquery-1.7.1.min.js"></script>
        <script src="./theme/Wikus/jquery.mobile-1.1.1.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
            <script type="text/javascript" charset="utf-8" src="smsread.js"></script>
            <script type="text/javascript" charset="utf-8" src="SMSReceiverPlugin.js"></script>
            <script type="text/javascript" src="./javascript/Queue.compressed.js"></script>
			<script type="text/javascript" src="./scripts/showaccounts.js"></script>
			<script type="text/javascript" src="./scripts/addaccount.js"></script>
                        <script type="text/javascript" src="./scripts/transactions.js"></script>
			
            <script type="text/javascript" charset="utf-8" src="common.js"></script>
            <script type="text/javascript" charset="utf-8" src="statusbarnotification.js"></script>
	
    
    <script type="text/javascript" src="./javascript/inisystem.js"></script>
    <script type="text/javascript">
        
        var db = null;
        var functionQueue = new Queue();
        var typeQueue = new Queue();
        
        var lastSql = "";
        
        
        function createIfNotExistTables()
        {
            functionQueue.enqueue('CREATE TABLE IF NOT EXISTS Bank_Account (Account_Num UNIQUE, Bank, Acc_Name, Balance)');
            typeQueue.enqueue('CREATE');
            
            functionQueue.enqueue('CREATE TABLE IF NOT EXISTS Budget_Items (Category UNIQUE,Budget_Amount,Remaining)');
            typeQueue.enqueue('CREATE');
            
            functionQueue.enqueue('CREATE TABLE IF NOT EXISTS sms (SMS_ID,Date,Time,Amount,Balance,Location,Account_Num,Category)');
            typeQueue.enqueue('CREATE');
            
            functionQueue.enqueue('CREATE TABLE IF NOT EXISTS Recon (Transaction_ID,Type,Recon,Account_Num,SMS_ID)');
            typeQueue.enqueue('CREATE');
        }
        
        function dropTables()
        {
            functionQueue.enqueue('DROP TABLE IF EXISTS Bank_Account');
            typeQueue.enqueue('DROP');
            
            functionQueue.enqueue('DROP TABLE IF EXISTS Budget_Items');
            typeQueue.enqueue('DROP');
            
            functionQueue.enqueue('DROP TABLE IF EXISTS sms');
            typeQueue.enqueue('DROP');
            
            functionQueue.enqueue('DROP TABLE IF EXISTS Recon');
            typeQueue.enqueue('DROP');
        }
        
        function checkQueue()
        {
        	console.log("CheckQueue");
            db.transaction(queryDB, error, success);
        }
        
        function queryDB(tx)
        {        
            var length = functionQueue.getLength();

            //alert("length of Queue:"+length);
            for(var i=0; i < length; i++)
            {

                var type = typeQueue.dequeue();
                var sqlVal = functionQueue.dequeue();
                //alert(type);
                //alert(sqlVal);
                lastSql = sqlVal;
                if(sqlVal != "")
                {
                    if(type == 'DROP')
                    {
                        //alert('Drop occured');
                        tx.executeSql(sqlVal);
                    }
                    if(type == 'CREATE')
                    {
                        //alert('Create occured');
                        tx.executeSql(sqlVal);
                    }
                    if(type == 'INSERT')
                    {
                        tx.executeSql(sqlVal);
                        //alert(sqlVal);
                    }
                }
            }
            
            //alert('Data loaded succesfully!');

            global_trans = tx;
        }
        
        // Transaction error callback
        function error(err) 
        {
            console.log("Error processing SQL: "+err.code);
            alert("Error: Last SQL : "+lastSql);
        }

        // Transaction success callback
        function success() 
        {
            console.log("success on database transaction.");
            $('h3.loading').detach();
        }
        
        function importInbox() {
        	navigator.notification.progressStart("Importing Inbox","Importing...");
		   window.plugins.SMSReader.getInbox("",
			function(data){
			      console.log("getINBOX+++++++++++Finised");
				  getDirectoryEntries(got_direntries);
				  navigator.notification.progressStop();
 
			},
			function(e){
				console.log(e);
			});
			

	    }
	    
	    function upProgress(value) 
        {
            navigator.notification.progressValue(value);
        }
	    
		
	/*	
 $( '#one' ).live( 'pageinit',function(event){

  init();
  
});*/


		
		
    </script>
        
        <!--##################END-->
        
        
</head> 

	
<body onload="init()" class="ui-mobile-viewport ui-overlay-c"> 

<!-- Start of first page: #one -->
<div style="min-height: 810px;"   class="ui-page ui-body-c ui-page-active" tabindex="0" data-url="one" data-role="page" id="one" data-theme="a">

	<!-- Header -->
        	<div data-role="header" data-position="fixed" data-id="homeheader">
        		<h1>Griffin Budgeter</h1>
        		<a href="javascript:navigator.app.exitApp();" data-icon="home" class="ui-btn-right">EXIT</a>
        		<div data-role="navbar">
					<ul>
						<li><a href="#one" class="ui-btn-active ui-state-persist" data-icon="home" >Home</a></li>
						<li><a href="#transactions" data-icon="star">Transactions</a></li>
						<li><a href="#graphMenu" data-icon="grid">Reports</a></li>
						<li><a href="#settings" data-icon="gear">Settings</a></li>
					</ul>
				</div>
	        </div>
	        
        <div data-role="content">
            <ul id="acc" data-role="listview" data-theme="d" data-divider-theme="d" class="ui-listview">
                <!-- Accounts are being added by showAccounts.js -->
            </ul>        	
        </div>                   
                    
                    
	        	<!--<h4>Overview:</h4>
	        	<hr>
	        	ABSA cheque account: Balance R1234<br>
	        	Income: R20000<br>
	        	Expenses: R1233<br>
	        	<hr>
	        	FNB cheque account: Balance R1345<br>
	        	Income: R2454<br>
	        	Expenses: R1655<br>
	        	<hr>-->
	        <!--</div>-->
	        
	        <!-- Footer -->
	        <!-- data-fullscreen="true" makes footer hide when not used -->
	        <div data-role="footer" data-position="fixed">
	        	<div data-role="navbar">
					<ul>
						<li><a href="#addacc">Add Account</a></li>
						<li><a href="delete.html">Delete Account</a></li>
					</ul>
				</div>
	        </div>	
</div><!-- /page one -->

<!--transactions-->
<!-- Start of transactions -->
<div style="min-height: 810px;" class="ui-page ui-body-a" tabindex="1" data-url="transactions" data-role="page" id="transactions" data-theme="a">

	<!-- Header -->
        	<div data-role="header" data-position="fixed" data-id="homeheader">
        		<h1>Griffin Budgeter</h1>
        		<a href="javascript:navigator.app.exitApp();" data-icon="home" class="ui-btn-right">EXIT</a>
        		<div data-role="navbar">
					<ul>
						<li><a href="#one"  data-icon="home" >Home</a></li>
						<li><a href="#transactions" class="ui-btn-active ui-state-persist" data-icon="star">Transactions</a></li>
						<li><a href="#graphMenu" data-icon="grid">Reports</a></li>
						<li><a href="#settings" data-icon="gear">Settings</a></li>
					</ul>
				</div>
	        </div>
	        
	        <div data-role="content">
				<ul id="transactions" data-role="listview" data-theme="d" data-divider-theme="d" class="ui-listview">
                                    <!-- All Transaction will be added by the transactions.js file... -->
				</ul>
	        	
	        </div>
	        
	        <!-- Footer -->
	        <!-- data-fullscreen="true" makes footer hide when not used -->
	        <div data-role="footer" data-position="fixed">
	        	<div data-role="navbar">
					<ul>
						<li><a href="add.html">New Transaction</a></li>
						<li><a href="delete.html">Filter</a></li>
					</ul>
				</div>
	        </div>	
</div><!-- /page transactions -->


<!--graphmenu-->
<div style="min-height: 810px;" class="ui-page ui-body-a" tabindex="2" data-url="graphMenu" data-role="page" id="graphMenu" data-theme="a">

	<!-- Header -->
        	<div data-role="header" data-position="fixed" data-id="homeheader">
        		<h1>Griffin Budgeter</h1>
        		<a href="javascript:navigator.app.exitApp();" data-icon="home" class="ui-btn-right">EXIT</a>
        		<div data-role="navbar">
					<ul>
						<li><a href="#one"  data-icon="home" >Home</a></li>
						<li><a href="#transactions" data-icon="star">Transactions</a></li>
						<li><a href="#graphMenu" class="ui-btn-active ui-state-persist" data-icon="grid">Reports</a></li>
						<li><a href="#settings" data-icon="gear">Settings</a></li>
					</ul>
				</div>
	        </div>
	        
	        
			<div data-role="content">
				<div data-role="controlgroup">
				<a href="Graph2/index.html" data-role="button">Income</a>
				<a href="Graph3/index.html" data-role="button">Expenses</a>
				<a href="Graph1/index.html" data-role="button">Overall Income and Expenses</a>
				<a href="LuthfiyaGraph1a/index.html" data-role="button">Expenses per Category</a>
				</div>
	        </div>
	        
	        <!-- Footer -->
	        <!-- data-fullscreen="true" makes footer hide when not used -->
	        <div data-role="footer" data-position="fixed" data-id="homefooter">
	        	<h4>FOOTER</h4>
	        </div>
			
			
			
</div>


<!--settings-->
<div style="min-height: 810px;" class="ui-page ui-body-a" tabindex="3" data-url="settings" data-role="page" id="settings" data-theme="a">

	<!-- Header -->
        	<div data-role="header" data-position="fixed" data-id="homeheader">
        		<h1>Griffin Budgeter</h1>
        		<a href="javascript:navigator.app.exitApp();" data-icon="home" class="ui-btn-right">EXIT</a>
        		<div data-role="navbar">
					<ul>
						<li><a href="#one"  data-icon="home" >Home</a></li>
						<li><a href="#transactions" data-icon="star">Transactions</a></li>
						<li><a href="#graphMenu" data-icon="grid">Reports</a></li>
						<li><a href="#settings" class="ui-btn-active ui-state-persist" data-icon="gear">Settings</a></li>
					</ul>
				</div>
	        </div>
	        
	        <div data-role="content">
				<div data-role="controlgroup">
				<a href="index.html" data-role="button">Accounts</a>
				<a href="javascript:importInbox();" data-role="button">Import Inbox</a>
				<a href="index.html" data-role="button">Import CSV</a>
				<a href="index.html" data-role="button">Export CSV</a>
				<a href="index.html" data-role="button">Graph Settings</a>
				</div>
	        	
	        </div>
</div><!-- page settings -->




<!--add accounts-->
<div style="min-height: 810px;" class="ui-page ui-body-a" tabindex="4" data-url="addacc" data-role="page" id="addacc" data-theme="a">

	<!-- Header -->
        	<div data-role="header" data-position="fixed" data-id="homeheader">
        		<h1>Griffin Budgeter</h1>
        		<a href="javascript:navigator.app.exitApp();" data-icon="home" class="ui-btn-right">EXIT</a>
        		
	        </div>
	        
	        <div data-role="content" style="padding: 15px">
		<div data-role="fieldcontain">
			<label for="selectmenu2">
				Choose:
			</label>
			<select name="selectmenu2" id="selectmenu2">
				
			</select>
		</div>
		
		<div data-role="fieldcontain">			
				<label  for="bank">Bank</label>
				<input   id="bank"  value="" type="text">			
		</div>
		<div data-role="fieldcontain">			
				<label for="acc_name">Account Name</label>
				<input id="acc_name"  value="" type="text">			
		</div>
		
		<input data-inline="true" align="middle" class="update" value="Update" type="submit">
                <a href="#one"><input data-inline="true" align="middle" class="back" value="Back" type="button"></a>
                
                
	</div>
</div><!-- /page add account -->



<div class="ui-loader ui-corner-all ui-body-a ui-loader-default"><span class="ui-icon ui-icon-loading"></span><h1>loading</h1></div></body></html>